---
import Layout from "../../layouts/Layout.astro";
import Hero from "../../components/Blog/Hero.astro";
import CardLayout from "../../layouts/CardLayout.astro";
import BlogCard from "../../components/Blog/BlogCard.astro";
import ResponsiveCards from "../../layouts/ResponsiveCards.astro";

interface Blog {
  success: boolean;
  message: string;
  offset: number;
  limit: number;
  blogs: BlogPost[];
}
interface BlogPost {
  id: number;
  title: string;
  description: string;
  photo_url: string;
  post_slug: string;
}

const API_URL = import.meta.env.API_URL + "/blogs";
const response = await fetch(API_URL);
const { blogs }: Blog = await response.json();
---

<Layout title="Blog">
  <Hero />
  <ResponsiveCards gap="112px" width="580px">
    {
      blogs.map((blog) => {
        const { description, id, photo_url, title, post_slug } = blog;
        return (
          <BlogCard
            title={title}
            description={description}
            image={photo_url}
            url={id}
          />
        );
      })
    }
  </ResponsiveCards>
</Layout>
